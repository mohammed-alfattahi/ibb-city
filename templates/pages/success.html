{% extends "base.html" %}
{% load static %}

{% block title %}{{ title|default:"تمت العملية بنجاح" }} - إب الخضراء{% endblock %}

{% block extra_css %}
<style>
    body::before {
        /* Ensure the premium background is present */
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(28, 40, 51, 0.9), rgba(39, 174, 96, 0.8));
        z-index: -1;
    }

    .success-container {
        min-height: 80vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 2rem;
        position: relative;
        z-index: 1;
    }

    .glass-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: 30px;
        border: 1px solid rgba(255, 255, 255, 0.4);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        max-width: 500px;
        width: 100%;
        text-align: center;
        padding: 3rem 2rem;
        position: relative;
        overflow: hidden;
        animation: cardPop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    @keyframes cardPop {
        0% {
            transform: scale(0.8);
            opacity: 0;
        }

        100% {
            transform: scale(1);
            opacity: 1;
        }
    }

    /* Green Top Accent */
    .glass-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 6px;
        background: linear-gradient(90deg, var(--ibb-green), #2ecc71);
    }

    /* Animated Checkmark */
    .checkmark-wrapper {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: #f0fdf4;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 2rem;
        box-shadow: 0 10px 20px rgba(39, 174, 96, 0.15);
        position: relative;
    }

    .checkmark {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        display: block;
        stroke-width: 2;
        stroke: var(--ibb-green);
        stroke-miterlimit: 10;
        box-shadow: inset 0px 0px 0px var(--ibb-green);
        animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
    }

    .checkmark__circle {
        stroke-dasharray: 166;
        stroke-dashoffset: 166;
        stroke-width: 2;
        stroke-miterlimit: 10;
        stroke: var(--ibb-green);
        fill: none;
        animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
    }

    .checkmark__check {
        transform-origin: 50% 50%;
        stroke-dasharray: 48;
        stroke-dashoffset: 48;
        animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
    }

    @keyframes stroke {
        100% {
            stroke-dashoffset: 0;
        }
    }

    @keyframes scale {

        0%,
        100% {
            transform: none;
        }

        50% {
            transform: scale3d(1.1, 1.1, 1);
        }
    }

    @keyframes fill {
        100% {
            box-shadow: inset 0px 0px 0px 30px #f0fdf4;
        }
    }

    .success-title {
        color: var(--ibb-stone);
        font-weight: 800;
        font-size: 2rem;
        margin-bottom: 1rem;
    }

    .success-message {
        color: #666;
        font-size: 1.1rem;
        margin-bottom: 2.5rem;
        line-height: 1.6;
    }

    .btn-continue {
        background: var(--ibb-green);
        color: white;
        border: none;
        border-radius: 50px;
        padding: 12px 40px;
        font-weight: 700;
        font-size: 1.1rem;
        transition: all 0.3s;
        box-shadow: 0 10px 20px rgba(39, 174, 96, 0.3);
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 10px;
    }

    .btn-continue:hover {
        background: var(--ibb-dark-green);
        transform: translateY(-3px);
        box-shadow: 0 15px 30px rgba(39, 174, 96, 0.4);
        color: white;
    }
</style>
{% endblock %}

{% block content %}
<div class="success-container">
    <div class="glass-card">
        <!-- SVG Animated Checkmark -->
        <div class="checkmark-wrapper">
            <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none" />
                <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
            </svg>
        </div>

        <h1 class="success-title">{{ title|default:"تم بنجاح!" }}</h1>
        <p class="success-message">
            {{ message|default:"تم تنفيذ العملية المطلوبة بنجاح. يمكنك الآن المتابعة." }}
        </p>

        <a href="{{ next_url|default:'/' }}" class="btn-continue">
            متابعة <i class="fas fa-arrow-left"></i>
        </a>
    </div>
</div>
{% endblock %}